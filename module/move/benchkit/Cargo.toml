[package]
name = "benchkit"
version = "0.1.0"
edition = "2021"
authors = [
  "Kostiantyn Wandalen <wandalen@obox.systems>",
]
license = "MIT"
readme = "readme.md"
documentation = "https://docs.rs/benchkit"
repository = "https://github.com/Wandalen/wTools/tree/master/module/move/benchkit"
homepage = "https://github.com/Wandalen/wTools/tree/master/module/move/benchkit"
description = """
Lightweight benchmarking toolkit focused on practical performance analysis and report generation.
Non-restrictive alternative to criterion, designed for easy integration and markdown report generation.
"""
categories = [ "development-tools", "testing" ]
keywords = [ "benchmark", "performance", "toolkit", "markdown", "reports" ]

[lints]
workspace = true

[package.metadata.docs.rs]
features = [ "full" ]
all-features = false

# = features

[features]
default = [
  "enabled",
  "markdown_reports",
  "data_generators",
  "criterion_compat",
]

full = [
  "default", 
  "html_reports",
  "json_reports",
  "statistical_analysis",
  "comparative_analysis",
  "optimization_hints",
]

# Core functionality
enabled = []

# Report generation features
markdown_reports = [ "enabled", "dep:pulldown-cmark" ]
html_reports = [ "markdown_reports", "dep:tera" ]  
json_reports = [ "enabled", "dep:serde_json" ]

# Analysis features  
statistical_analysis = [ "enabled", "dep:statistical" ]
comparative_analysis = [ "enabled" ]
optimization_hints = [ "statistical_analysis" ]

# Utility features
data_generators = [ "enabled", "dep:rand" ]
criterion_compat = [ "enabled", "dep:criterion" ]  # Compatibility layer

# Environment features
no_std = []
use_alloc = [ "no_std" ]

[dependencies]
# Core dependencies - always available
error_tools = { workspace = true, features = [ "enabled" ] }

# Feature-gated dependencies  
pulldown-cmark = { version = "0.10", optional = true }
tera = { version = "1.19", optional = true }
serde_json = { workspace = true, optional = true }
statistical = { version = "1.0", optional = true }
rand = { workspace = true, optional = true }
criterion = { version = "0.5", optional = true }

[dev-dependencies]
test_tools = { workspace = true }

# Examples and integration tests
[[example]]
name = "basic_usage"
required-features = ["enabled"]

[[example]]
name = "markdown_generation"  
required-features = ["markdown_reports"]

[[example]]
name = "comparative_benchmark"
required-features = ["comparative_analysis"]