# Project Plan: Fix former crate tests

## Increments

*   ⏳ Increment 1: Fix macro interpolation errors in `former_meta` enum handlers.
    *   Detailed Plan Step 1: Modify `module/core/former_meta/src/derive_former/former_enum/struct_non_zero.rs`. Assign `ctx.vis` to a local variable `vis` before each `quote!` macro call that uses it, and interpolate `#vis` instead of `#ctx.vis`. (DONE)
    *   Detailed Plan Step 2: Modify `module/core/former_meta/src/derive_former/former_enum/tuple_non_zero.rs`. Assign `ctx.vis` to a local variable `vis` before each `quote!` macro call that uses it, and interpolate `#vis` instead of `#ctx.vis`. (DONE)
    *   Detailed Plan Step 3: Modify `module/core/former_meta/src/derive_former/former_enum/struct_non_zero.rs`. Assign `ctx.enum_name` to a local variable `enum_name` before each `quote!` macro call that uses it, and interpolate `#enum_name` instead of `#&ctx.enum_name`.
    *   Detailed Plan Step 4: Modify `module/core/former_meta/src/derive_former/former_enum/tuple_non_zero.rs`. Assign `ctx.enum_name` to a local variable `enum_name` before each `quote!` macro call that uses it, and interpolate `#enum_name` instead of `#&ctx.enum_name`.
    *   Crucial Design Rules: N/A (Build fix)
    *   Verification Strategy: Run `cargo test` in `module/core/former` and check if compilation errors related to macro interpolation are resolved. Analyze logs critically.
*   ⚫ Increment 2: Run tests and fix any remaining failures.
    *   Detailed Plan Step 1: Run `cargo test` in `module/core/former`.
    *   Detailed Plan Step 2: Analyze any failures based on logs.
    *   Detailed Plan Step 3: Propose and implement fixes for remaining failures.
    *   Crucial Design Rules: TBD based on failures.
    *   Verification Strategy: Run `cargo test` in `module/core/former` until all tests pass. Analyze logs critically.

## Notes & Insights

*   [Date/Init] Initial analysis indicates compilation errors in `former_meta` related to `ToTokens` trait implementation for `EnumVariantHandlerContext` within `quote!` macros when interpolating `#ctx.vis`. - Status: Resolved
*   [Date/Inc 1] Verification revealed new compilation errors in `former` tests due to incorrect interpolation (`# & ctx.enum_name`) in code generated by `former_meta`.
*   [Date/Inc 1] Insight: `quote!` macro does not support interpolating paths like `#ctx.enum_name`. A local variable must be used to store the value before interpolation.
*