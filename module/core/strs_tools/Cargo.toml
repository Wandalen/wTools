[package]
name = "strs_tools"
version = "0.23.0"
edition = "2021"
authors = [
  "Kostiantyn Wandalen <wandalen@obox.systems>",
  "Dmytro Kryvoruchko <dmytro.kr@obox.systems>",
]
license = "MIT"
readme = "readme.md"
documentation = "https://docs.rs/strs_tools"
repository = "https://github.com/Wandalen/wTools/tree/master/module/core/strs_tools"
homepage = "https://github.com/Wandalen/wTools/tree/master/module/core/strs_tools"
description = """
Tools to manipulate strings.
"""
categories = [ "algorithms", "development-tools" ]
keywords = [ "fundamental", "general-purpose" ]

[lints]
workspace = true

[package.metadata.docs.rs]
features = [ "full" ]
all-features = false

[features]
default = [
  "enabled",
  "string_indentation",
  "string_isolate",
  "string_parse_request",
  "string_parse_number",
  "string_split",
  "simd",
]
full = [
  "enabled",
  "use_alloc",
  "string_indentation",
  "string_isolate",
  "string_parse_request",
  "string_parse_number",
  "string_split",
  "simd",
]

# Performance optimization features
simd = ["memchr", "aho-corasick", "bytecount", "lazy_static"]

no_std = []
use_alloc = [ "no_std" ]
enabled = []

# Core features
indentation = [ "enabled" ]
isolate = [ "enabled" ]
parse_request = [ "split", "isolate", "enabled" ]
parse_number = [ "lexical", "enabled" ]
split = [ "enabled" ]

# Feature aliases for backwards compatibility
string_indentation = [ "indentation" ]
string_isolate = [ "isolate" ]
string_parse_request = [ "parse_request" ]
string_parse_number = [ "parse_number" ]
string_parse = [ "parse_request" ]
string_split = [ "split" ]

[dependencies]
lexical = { workspace = true, optional = true }
component_model_types = { workspace = true, features = ["enabled"] }

# SIMD optimization dependencies (optional)
memchr = { workspace = true, optional = true }
aho-corasick = { workspace = true, optional = true }
bytecount = { workspace = true, optional = true }
lazy_static = { version = "1.4", optional = true }

# Benchmark runner dependencies  
chrono = { version = "0.4", features = ["serde"] }

[dev-dependencies]
test_tools = { workspace = true }
criterion = { version = "0.5", features = ["html_reports"] }

# Disabled due to infinite loop issues
[[bench]]
name = "bottlenecks"
harness = false
path = "benchmarks/bottlenecks.rs"

[[bin]]
name = "simd_test"
required-features = ["simd"]

[[bin]]
name = "bench_runner"
path = "benchmarks/simple_runner.rs"
